<%= render partial: "shared/navigation_bar"%>
<div class="container">  
  <div class="row">
    <div class="col"></div>
    <div class="col-6">
      <h1 class="text-center">Edit User</h1>
      <%= form_tag user_update_path, :method => :post do %>
        <div class="form-row">
          <%= label_tag 'Username'%>
          <%= text_field_tag :username, "#{@user.username}", required: true, class: 'form-control'%>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <%= label_tag 'First Name'%>
            <%= text_field_tag :firstName, "#{@user.firstName}", required: true, class: 'form-control'%>
          </div>
          <div class="form-group col-md-6">
            <%= label_tag 'Last Name' %>
            <%= text_field_tag :lastName, "#{@user.lastName}", required: true, class: 'form-control'%>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <%= label_tag :email%>
            <%= email_field_tag :email, "#{@user.email}", required: true, class: 'form-control'%>
          </div>
          <div class="form-group col-md-6">
            <%= label_tag :phone_number%>
            <%= text_field_tag :phoneNum, "#{@user.phoneNum}", required: true, class: 'form-control'%>
          </div>
        </div>

        <div class="form-group">
          <%= label_tag :address%>
          <%= text_field_tag :address, "#{@user.address}", required: true, class: 'form-control'%>
        </div>
        
        <div class="form-row">
          <div class="form-group col-md-6">
            <%= label_tag :Role%>
            <%= select_tag :userType, options_for_select([["Administrator", 1], ["Manager", 2], ["Accountant", 3]], selected: @user.userType) %>
          </div>
          <div class="form-group col-md-6">
            <%= label_tag :activate%>
            <%= check_box_tag :active, true, @user.active %>
          </div> 
        </div>

        <%= label_tag @user.security_question.first.question%>
        <%= text_field_tag :security_question_answer, "#{@user.password_authorization.pluck(:answer).first}", required: true, class: 'form-control'%> <br>
        <%= hidden_field_tag "user_id", @user.id %>
        <% if @user.suspendedTill > Time.now %>
          <%= label_tag "This user is already suspended until: #{@user.suspendedTill.strftime("%B%e, %Y %I:%M %p")}", nil, class: "text-danger" %><br>
          <%= label_tag "Remove Suspension?" %>
          <%= check_box_tag "reset_suspension", true, false %><br>
        <% else %>
          <%= label_tag 'Suspend User Until: '%>
          <%= datetime_select 'suspend_time', "", {ampm: true, default: Time.now, disabled: @user.suspendedTill > Time.now}%><br><br>
        <%end%>
        <%= submit_tag 'Submit', :class => 'btn btn-primary btn-block' %>
      <%end%>
    </div>
    <div class="col"></div>
  </div>
</div>