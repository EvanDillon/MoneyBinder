<%= render partial: "shared/navigation_bar"%>
<div class="container">
  <text-align>
    <center>
      <h1>Chart of Accounts</h1>
    </center>
  </text-align>
  <div class = 'row'>
    <div class="col py-3 px-lg-2">
      <%= button_to "Create New Account", new_account_path, method: :get, class: "btn btn-primary"%>
    </div>

    <div class="float-right">
      <div class="col py-3 px-lg-2">
        <div class="input-group">
          <div class="form-outline">
            <%= form_tag accounts_path, method: "GET" do %>
            <%= text_field_tag :search_accounts, params[:search_accounts], placeholder: "Search for Account", class: 'form-control' %>
          </div>
            <%= submit_tag "Search", class: "btn btn-primary" %>
          <%end%>
        </div>
      </div>
    </div>
  </div>
  <div class = 'row'>
    <table class="table table-striped table-sm border">
      <thead>
      <tr>
          <th scope="col">Account #</th>
          <th scope="col">Name</th>
          <th scope="col">Type</th>
          <th scope="col">Sub-Type</th>
          <th scope="col">Balance</th>
          <th scope="col">Active</th>
          <th scope="col">Created By</th>
          <th scope="col"></th> 
        </tr>
      </thead>
      <tbody>
        <% @accounts.each do |account| %>
          <tr>
            <th scope="row"><%= account.account_number %></th>
            <td><%= account.name %></td>
            <td><%= account.category %></td>
            <td><%= account.subcategory %></td>
            <td>$ <%= number_with_precision(account.balance, precision: 2, delimiter: ',')%></td>
            <td><%= account.active %></td>
            <td><%= User.find(account.user_id).username %></td>            
            <td><%= button_to "Edit", edit_account_path(account), method: :get, class: "btn btn-primary btn-sm float-right"%></td>
          </tr>
        <%end%>
      </tbody>
    </table>
  </div>
</div>